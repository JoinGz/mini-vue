
## 按位运算符

### 二进制复习

| 十进制 | ... | 8 | 4 | 2 | 1 |
| -- | --  | -- | -- | -- | -- |
| 10 | ... | 1 | 0 | 1 | 0 |
| 2  | ... | 0 | 0 | 1 | 0 |

十进制10的二进制为 1010

十进制2的二进制为 0010

### 按位左移运算符 (<<)

左移表达式的位。不分正负数，低位补0。

result = expression1 << expression2

<< 运算符把 expression1 的所有位向左移 expression2 指定的位数。例如：

```js
const temp = 14 << 2 // 56
(14).toString('2') // 001110
(56).toString('2') // 111000
```

变量 temp 的值为 56，因为 14 （即二进制的 00001110）向左移两位等于 56 （即二进制的 00111000）。



```js
const num = 1 // 二进制为 0001
const num2 = 1 << 1 // 表示1的所有位向左移动1位  0010
const num2 = 1 << 2 // 表示1的所有位向左移动2位  0100
const num2 = 1 << 3 // 表示1的所有位向左移动3位  1000
```

注：以下数据类型默认为byte-8位

左移时不管正负，低位补0

正数：r = 20 << 2

　　20的二进制补码：0001 0100

　　向左移动两位后：0101 0000

　　　　   　结果：r = 80

<br/>

负数：r = -20 << 2

　　-20 的二进制原码：1001 0100

　　-20 的二进制反码：1110 1011

　　-20 的二进制补码：1110 1100

　　左移两位后的补码：1011 0000

　　　　　　　　反码：1010 1111

　　　　　　　　原码：1101 0000 

　　　　　　　　结果：r = -80


### 按位右移运算符 (>>)

右移表达式的位，保持符号不变。如果该数为正，则高位补0，若为负数，则高位补1；

result = expression1 >> expression2

运算符把 expression1 的所有位向右移 expression2 指定的位数。

expression1 的符号位被用来填充右移后左边空出来的位。向右移出的位被丢弃。

例如，下面的代码被求值后

```js
const temp = -14 >> 2
const temp2 = 67 >> 2 
// 67 -> 01000011
// 移动两位 00010000
// parseInt('00010000', 2) -> 16
```


注：以下数据类型默认为byte-8位

正数：r = 20 >> 2

　　20的二进制补码：0001 0100

　　向右移动两位后：0000 0101

　　　　　　　结果：r = 5

<br/>

负数：r = -14 >> 2

　　-14 的二进制原码：1000 1110

　　-14 的二进制反码：1111 0001

　　-14 的二进制补码：1111 0010

　　右移两位后的补码：1111 1100

　　　　　　　　反码：1111 1011

　　　　　　　　原码：1000 0100

　　　　　　　　结果：r = -4


### 按位“或”运算符 (|)

result = expression1 | expression2

| 运算符查看两个表达式的二进制表示法的值，并执行按位“或”操作。该操作的结果如下所示：

0101   (expression1) 1100   (expression2) ---- 1101   (结果)
任何时候，只要任一表达式的一位为 1，则结果的该位为 1。否则，结果的该位为 0。

```js
0101
1100
----
1101
// 加法处理
```

### 按位“与”运算符 (&)
对两个表达式执行按位“与”。

result = expression1 & expression2

& 运算符查看两个表达式的二进制表示法的值，并执行按位“与”操作。该操作的结果如下所示：

0101   (expression1) 1100   (expression2) ---- 0100   (result)
任何时候，只要两个表达式的某位都为 1，则结果的该位为 1。否则，结果的该位为 0。

```js
0101
1100
----
0100
```

### shapeFlags设计

| 二进制 | 描述|
| -- | -- |
| 0001 |表示element类型|
|0010 |表示components类型|
| 0100 |表示text_children类型|
| 1000 |表示array_children类型|



 他们可以相互融合
 如：1010 表示是components类型children是array_children类型

那么，我们就可以在一个shapeFlags里面根据位数的值不同来判断多种种类。
如：0110，表示这是一个components类型，但是他的子元素是一个文本类型（text_children）


[二进制的原码、反码、补码](https://zhuanlan.zhihu.com/p/99082236)

[原码/反码/补码计算器](http://www.atoolbox.net/Tool.php?Id=952)

[参考](https://www.php.cn/manual/view/15172.html)
[参考2](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Expressions_and_Operators)